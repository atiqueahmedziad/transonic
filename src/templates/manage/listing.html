<section class="manage-modules-listing island">
  {% defer (url=api('feed-apps')|urlparams(ordering='-created')) %}
    <h2>{{ _('Featured Apps ({number})')|format({number: this.meta.total_count}) }}</h2>
    <ul class="feed-apps">
      {% for feed_app in this.objects %}
        <li class="feed-app" data-slug="{{ feed_app.slug }}">
          <a href="{{ url('edit', ['apps', feed_app.slug]) }}">
            <img class="icon" src="{{ feed_app.app.icons['48'] }}">
            <h3>{{ feed_app.app.name }}</h3>
            <p>{{ settings.FEEDAPP_TYPES[feed_app.feedapp_type] }}</p>
            <span class="delete"></span>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% placeholder %}
    <h2>{{ _('Featured Apps') }}</h2>
  {% end %}

  {% defer (url=api('collections')|urlparams(ordering='-created')) %}
    <h2>{{ _('Collections ({number})')|format({number: this.meta.total_count}) }}</h2>
    <ul class="collections">
      {% for collection in this.objects %}
        <li class="collection" data-slug="{{ collection.slug }}">
          <a href="{{ url('edit', ['collections', collection.slug]) }}">
            {% if collection.apps.length %}
              <img class="icon" src="{{ collection.apps[0].app.icons['48'] }}">
            {% endif %}
            <h3>{{ _('{name} ({num_apps} apps)')|format({name: collection.name, num_apps: collection.apps.length}) }}</h3>
            <p>{{ settings.COLL_TYPES[collection.collection_type] }}</p>
            <span class="delete"></span>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% placeholder %}
    <h2>{{ _('Collections') }}</h2>
  {% end %}

  {% defer (url='') %}
    <h2>{{ _('Editorial Brands ({number})')|format({number: this.meta.total_count or 0}) }}</h2>
    <ul class="brands">
      {% for brand in this.objects %}
        <li class="brand">
          <h3>{{ brand.name }}</h3>
          <span class="delete"></span>
        </li>
      {% endfor %}
    </ul>
  {% placeholder %}
    <h2>{{ _('Editorial Brand') }}</h2>
  {% end %}
</section>
